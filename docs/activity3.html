<html>
    <head>
        <meta charset="utf8">
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <!-- highlight.js CSS -->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css">
        <!-- FlexiColorPicker CSS -->
        <link rel="stylesheet" href="FlexiColorPicker/themes.css">
        <!-- My own styles -->
        <link rel="stylesheet" href="hljs-style.css">
        <link rel="stylesheet" href="style.css">

        <title>p5.js à l'Ubuntu Party !</title>
    </head>
    <body>
        <nav class="navbar navbar-expand navbar-dark bg-ubuntu shadow-sm mb-5">
            <span class="navbar-brand">Découvrir p5.js</span>
            <ul class="navbar-nav nav-pills ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="index.html">Activité 2</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="#">Activité 3</a>
                </li>
            </ul>
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="https://editor.p5js.org/">Editeur p5.js</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://www.ubuntu-paris.org/">Site de l'Ubuntu Party</a>
                </li>
            </ul>
        </nav>

        <div class="container">
            <div class="alert alert-primary">
                Lors de cette activité, ta mission sera d'apporter des modifications au jeu Flappy Smile que j'ai réalisé, pour  le rendre plus joli, plus amusant, et surtout qu'il convienne à tes gouts particuliers. N'hésite pas à exprimer toute ta créativité !<br/>
                Tu peux accéder au jeu à cette adresse : <a href="https://editor.p5js.org/Vertmo/sketches/rydjVgRnm">https://editor.p5js.org/Vertmo/sketches/rydjVgRnm</a>, mais tu devras normalement déjà avoir un onglet ouvert. Commence par tester le jeu (en cliquant sur le bouton play en haut à gauche, puis en cliquant sur l'image. Fait monter ton smiley en appuyant sur la flèche du haut de ton clavier, et essaie d'éviter les murs !<br/>
                Maintenant que tu as une idée du jeu (et de ses défauts) tu peux choisir une des améliorations à réaliser dans la liste ci-dessous; ne t'en fais pas, tu sera guidé pour chaque amélioration. Je te conseille de commencer par les améliorations de la catégorie <a href="#pourCommencer">Pour commencer</a>, puis si tu as le temps, essaie une de la catégorie <a href="#plusDif">Plus difficile</a>.
            </div>


            <h2 id="pourCommencer" class="header">Pour commencer</h2>
            <hr/>
            <section>
                <div class="card mb-5">
                    <div class="card-header">Couleurs et dessin</div>
                    <div class="card-body">
                        <div class="input-group mb-3">
                            <input type="text" class="form-control" id="act31Passwd" placeholder="Mot de passe" aria-label="Mot de passe" aria-describedby="basic-addon2">
                            <div class="input-group-append">
                                <button class="btn btn-outline-primary btn-ubuntu" id="act31Button">Voir le guide</button>
                            </div>
                        </div>
                        <div class="collapse" id="act31Collapse">
                            Dans cette partie, ton but sera de <b>modifier les couleurs</b> et le visuel du jeu. Pour se faire, tu pourra utiliser les trois blocs de code ci dessous pour manipuler les couleurs. Essaie de trouver ces blocs de code dans le code et de les modifier pour changer les couleurs affichées.
                            <pre class="mb-0"><code class="javascript">
background(r, g, b); // Change la couleur du fond
stroke(r, g, b); // Change la couleur de dessin
fill(r, g, b); // Change la couleur de coloriage
                            </code></pre>
                            <div class="mb-3" style="text-align: center">
                            Tu peux utilise le sélecteur ci-dessous pour choisir une couleur:<br/>
                                <div style="display: flex; justify-content:center">
                                    <div id="picker" class="picker"></div>
                                    <div id="slide" class="slide"></div>
                                </div>
                                <div style="clear:both">
                                    <input readonly id="colorR" class="colorDisplay">
                                    <input readonly id="colorG" class="colorDisplay">
                                    <input readonly id="colorB" class="colorDisplay">
                                </div>
                            </div>
                            <div class="alert alert-info">
                                <strong>Pour aller plus loin:</strong> en informatique, les couleurs sont codées au format RGB (ou Rouge Vert Bleu) : ce format est constitué de trois chiffres entre 0 et 255 indiquant les quantitées de rouge, vert et bleu dans la couleur. Par exemple <em>255 0 0</em> est rouge pur, <em>0 255 255</em> est cyan et <em>255 0 255</em> est violet. Il est important de noter que <em>0 0 0</em> est noir et <em>255 255 255</em> blanc !
                            </div>
                            Tu pourrais également modifier l'apparence du smiley que tu joues. Pour cela je te conseille de modifier la partie:
                            <pre class="mb-0"><code class="javascript">
function dessinerSmiley(x, y) {
  fill(255,255,0);
  ellipse(x, y, 20, 20);
  noFill();
  line(x, y-3, x, y);
  line(x+4, y-3, x+4, y);
  arc(x+2, y+2, 10, 10, 0, PI);
}
                            </code></pre>
                            Tu pourrais par exemple remplacer <i>ellipse(x, y, 20, 20)</i> par <i>rect(x-10, y-10, 20, 20)</i> pour lui faire la tête au carré ! Ou bien remplacer <i>arc(x+2, y+2, 10, 10, 0, PI)</i> par <i>arc(x+2, y+7, 10, 10, PI, 0)</i> pour le rendre triste :(
                        </div>
                    </div>
                </div>

                <div class="card mb-5">
                    <div class="card-header">Difficulté du jeu (vitesse des murs et taille du trou)</div>
                    <div class="card-body">
                        <div class="input-group mb-3">
                            <input type="text" class="form-control" id="act32Passwd" placeholder="Mot de passe" aria-label="Mot de passe" aria-describedby="basic-addon2">
                            <div class="input-group-append">
                                <button class="btn btn-outline-primary btn-ubuntu" id="act32Button">Voir le guide</button>
                            </div>
                        </div>
                        <div class="collapse" id="act32Collapse">
                            Tu as plusieurs solutions pour modifier la difficulté du jeu: tu pourrais par exemple essayer de diminuer la vitesse à laquelle les murs arrivent vers toi. Je te conseille dans ce cas de modifier la partie:
                            <pre class="mb-0"><code class="javascript">
function majMurs() {
  [...]
  murs[i][0] -= 8;
  [...]
}
                            </code></pre>
                            Une autre solution que tu pourrais utiliser pour rendre le jeu plus ou moins facile, serait de modifier la taille du trou central par lequel ton personnage doit passer. Pour cela essaie de modifier la partie:
                            <pre class="mb-0"><code class="javascript">
function genMur() {
  [...]
  append(murs, [width+30, r, 80]); // x, centre, hauteur (du trou)
}
                            </code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <h2 id="plusDifficile" class="header">Plus difficile</h2>
            <hr/>
            <section>

                <div class="card mb-5">
                    <div class="card-header">Ajout et affichage d'un score</div>
                    <div class="card-body">
                        <div class="input-group mb-3">
                            <input type="text" class="form-control" id="act33Passwd" placeholder="Mot de passe" aria-label="Mot de passe" aria-describedby="basic-addon2">
                            <div class="input-group-append">
                                <button class="btn btn-outline-primary btn-ubuntu" id="act33Button">Voir le guide</button>
                            </div>
                        </div>
                        <div class="collapse" id="act33Collapse">
                            Si tu veux ajouter un score, il va falloir faire deux choses: trouver un moyen de comptabiliser ce score, et d'afficher ce score. Commence par ajouter une variable "score" au début du programme (avant <i>setup()</i>):
                            <pre class="mb-0"><code class="javascript">
var score = 0;
                            </code></pre>
                            Comme tu peux le voir, le score est initialisé à 0: nous allons maintenant ajouter une instruction pour augmenter le score au cours de la partie. Tu devras ajouter cette instruction, qui ajoute 1 point au score, quelque part dans le bloc de code <i>draw()</i>, pour qu'elle soit exécutée régulièrement.
                            <pre class="mb-0"><code class="javascript">
function draw() {
  [...]
  score = score + 1; // N'importe ou dans draw() !
  [...]
}
                            </code></pre>
                            Maintenant, nous voulons afficher ton score ! A la fin de le bloc de code <i>draw()</i>, ajoute ces trois instructions :
                            <pre class="mb-0"><code class="javascript">
function draw() {
  [...]
  fill(0,0,0);
  textSize(32);
  text(score, 500, 30);
}
                            </code></pre>
                            Si tu lances le jeu maintenant, tu verra qu'il y a bien un score affiché dans le coin en haut a gauche ! Cela dit, il manque toujours un petit détail : quand le joueur perd, nous voudrions que le score soit réinitialisé. Pour cela tu peux ajouter l'instruction ci-dessous à le bloc de code <i>perdre()</i>: elle remettra ton score à 0.
                            <pre class="mb-0"><code class="javascript">
function perdre() {
  [...]
  score = 0;
  [...]
}
                            </code></pre>
                        </div>
                    </div>
                </div>

                <div class="card mb-5">
                    <div class="card-header">Evolution de la taille du trou, taille du trou aléatoire</div>
                    <div class="card-body">
                        <div class="input-group mb-3">
                            <input type="text" class="form-control" id="act34Passwd" placeholder="Mot de passe" aria-label="Mot de passe" aria-describedby="basic-addon2">
                            <div class="input-group-append">
                                <button class="btn btn-outline-primary btn-ubuntu" id="act34Button">Voir le guide</button>
                            </div>
                        </div>
                        <div class="collapse" id="act34Collapse">
                            Tu vas commencer par ajouter une variable qui permettra au programme de garder en mémoire l'état actuel. Pour cela ajoute au début du programme (avant <i>setup()</i>):
                            <pre class="mb-0"><code class="javascript">
var ecart;
                            </code></pre>
                            Ensuite, nous voulons donner au programme la valeur de départ de l'écart. Pour que le jeu ne soit pas trop difficile, nous allons prendre un écart assez grand, par exemple 140. Ajoute l'instruction suivante dans le bloc de code <i>setup()</i> pour régler l'écart au début du programme :
                            <pre class="mb-0"><code class="javascript">
function setup() {
  [...]
  ecart = 140;
}
                            </code></pre>
                            N'oublions pas que nous voulons aussi faire évoluer cet écart au cours de la partie ! Pour cela nous devons ajouter une instruction modifiant la valeur de l'écart dans le bloc de code <i>draw()</i> pour qu'elle soit appelée en continu (nous n'allons diminuer la valeur de l'écart que d'un petit peu à chaque instant, pour ne pas que les trous deviennent trop petits trop vite):
                            <pre class="mb-0"><code class="javascript">
function draw() {
  [...]
  ecart -= 0.05;
}
                            </code></pre>
                            Si tu testes le code maintenant, tu t'apercevra que ... rien n'a changé. C'est parce que nous n'avons pas encore utilisé cetta valeur d'écart que nous avons ajouté pour réellement influencer le programme. Pour changer cela, nous allons modifier la partie du code qui crée de nouveaux murs: le bloc de code <i>genMur()</i>. Et pour rendre les choses plus intéressante, nous allons ajouter un peu d'aléatoire ! Modifie le code de le bloc de code <i>genMur()</i> comme suit:
                            <pre class="mb-0"><code class="javascript">
function genMur() {
  let r = random(50, height-50);
  append(murs, [width+30, r, random(ecart, ecart+20)]); // x, centre, hauteur (du trou)
}
                            </code></pre>
                            <div class="alert alert-info">
                                <strong>Pour aller plus loin:</strong> l'aléatoire est ce qui ne peut pas être prévue (la face sur laquelle tombera un dé, la carte de jeu que tu vas tirer...). En informatique, générer de l'aléatoire "artificiel" est difficile (pour de multiples raisons) mais on y arrive quand même, ce qui nous permet d'offir des blocs de code comme <i>random(min, max)</i> qui choisit une valeur au hasard entre min et max.
                            </div>
                            Et voila ! Si tu relances le jeu, tu te rendra compte que la taille des trous varies avec le temps, mais que parfois elle grandit à nouveau, grâce aux variations de <i>random()</i>. Tu peux si tu veux continuer de modifier les différentes valeurs introduites dans cette partie pour rendre le jeu plus ou moins difficile, à ta guise !
                        </div>
                    </div>
                </div>

                <div class="card mb-5">
                    <div class="card-header">Sons</div>
                    <div class="card-body">
                        <div class="input-group mb-3">
                            <input type="text" class="form-control" id="act35Passwd" placeholder="Mot de passe" aria-label="Mot de passe" aria-describedby="basic-addon2">
                            <div class="input-group-append">
                                <button class="btn btn-outline-primary btn-ubuntu" id="act35Button">Voir le guide</button>
                            </div>
                        </div>
                        <div class="collapse" id="act35Collapse">
                            Dans cette partie, tu vas ajouter un son qui sera joué quand la partie est perdue ! Le fichier contenant le son à déjà été ajouté au projet, donc tu as juste besoin de le charger. Pour cela, ajoute les instructions suivantes au début du code:
                            <pre class="mb-0"><code class="javascript">
var gameover;
function preload() {
  gameover = loadSound('assets/game-over.wav');
}
                            </code></pre>
                            Après avoir ajouté ces lignes, tu remarquera que si tu relances le programme, il affiche "loading" avant de lancer le jeu. Cela signifie que le programme est en train de charger le fichier. Par contre, le son ne se joue pas: on n'a pas encore ajouté l'instruction qui lance le son. Ajoute donc dans le bloc de code <i>perdre()</i> le code ci-dessous:
                            <pre class="mb-0"><code class="javascript">
gameover.play();
                            </code></pre>
                            Maintenant, re-lance le jeu, et tu verra que le son joue quand tu perds le jeu ! Quel son agréable n'est-ce pas ?
                        </div>
                    </div>
                </div>

            </section>

        </div>

        <!-- jQuery and bootstrap scripts -->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
        <!-- highlight.js script -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>

        <!-- FlexiColorPicker -->
        <script src="FlexiColorPicker/colorpicker.min.js"></script>

        <!-- My own javascript (eventually) -->
        <script src="script.js"></script>
    </body>
</html>
